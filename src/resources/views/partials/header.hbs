<!-- navbar top -->
<div class="header">
  <div class="navbar-top bg-dark" id="navbar-top">
    <div class="row">
      <div class="col col-nav1">Hotline: 1900.633.349 (8:00-21:00 mỗi ngày)</div>
      <div class="col col-nav2">
        <a href="/help" id="a-nav">Trợ giúp</a> &emsp;
        <a href="/shoes/my-order" id="a-nav">Tình trạng đơn hàng</a>
      </div>
    </div>
  </div>
  <!-- navbar top -->

  <!-- main content -->
  <div class="main-content" id="navbar">
    <nav class="navbar navbar-expand-sm  navbar-light header-client">
      <div class="container-fluid">
        <a class="navbar-brand" href="/"><img class="logo-header" src="/img/image-Photoroom.png" alt=""></a>
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0 " id="nav">
          <li>
            <a class="nav-header nav-link" href="/shoes/shoe-type/giay-cao-got">
              Giày Nữ
            </a>
            <ul class="subnav">
              <li><a href="/shoes/shoe-type/giay-cao-got">Giày Cao Gót</a></li>
              <li><a href="/shoes/shoe-type/giay-bup-be">Giày Búp Bê</a></li>
              <li><a href="/shoes/shoe-type/dep-nu">Dép Nữ</a></li>
              <li><a href="/shoes/shoe-type/boot-nu">Boot Nữ</a></li>
            </ul>
          </li>
          <li>
            <a class="nav-header nav-link " href="/shoes/shoe-type/giay-tay">
              Giày Nam
            </a>
            <ul class="subnav">
              <li><a href="/shoes/shoe-type/giay-the-thao">Giày Thể Thao</a></li>
              <li><a href="/shoes/shoe-type/boot-nam">Boot nam</a></li>
              <li><a href="/shoes/shoe-type/dep-nam">Dép Nam</a></li>
              <li><a href="/shoes/shoe-type/giay-tay">Giày Tây & SLip On</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-header nav-link" href="/shoes/shoe-type/giay-cap">Giày Cặp</a>
          </li>
          <li class="nav-item">
            <a class="nav-header nav-link" href="/shoes/sale">Khuyến mãi</a>
          </li>
          <li>
            <a class="nav-header nav-link " href="/blogs">
              Chia sẻ
            </a>
            <ul class="subnav">
              <li><a href="/blogs/xu-huong-thoi-trang">Xu hướng thời trang</a></li>
              <li><a href="/blogs/tu-van-chon-size">Tư vấn chọn size</a></li>
              <li><a href="/blogs/kinh-nghiem-hay">Kinh nghiệm hay</a></li>
            </ul>
          </li>
        </ul>
        <!-- Search form -->
        <form action="/search" method="get">
          <div class="input-group">
            <div class="input-group-prepend">
              <div class="input-group-text" id="btnGroupAddon"><i class="fa-solid fa-magnifying-glass fa-beat"></i>
              </div>
            </div>
            <input type="text" class="form-control" placeholder="Tìm kiếm" name="keyWord"
              aria-describedby="btnGroupAddon" id="search-input">
            <div id="suggestions" class="suggestions-box"></div> <!-- Thêm div này -->
          </div>
        </form>


        <div class="icon-header">
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item dropdown " style="cursor: pointer;">
              {{#if currentUser}}
              <a class="nav-link " id="navbardrop" data-toggle="dropdown">
                <img src="/img/img_avatar3.png" alt="" class="user-avatar">
                Hi, {{currentUser.name}}
              </a>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="/profile">Thông tin cá nhân</a>
                {{#if currentUser.isAdmin}}
                <a class="dropdown-item" href="/me/home">Quản lý thông tin</a>
                {{/if}}
                <a class="dropdown-item" href="/shoes/my-order">Đơn hàng của tôi</a>
                <a class="dropdown-item" href="/password">Đổi mật khẩu</a>
                <a class="dropdown-item" href="/log-out">Đăng xuất</a>
              </div>
              {{else}}
              <a href="/login" class="icon-user"><i class="fa-regular fa-user"></i></a>
              {{/if}}
            </li>
            <li>
              <a href="/wishlist" class="icon-head notification">
                <span><i class="fa-regular fa-heart"></i></span>
                <span class="badge">{{#if countWishlist}} {{countWishlist}} {{else}}0{{/if}}</span>
              </a>
            </li>
            <li class="cart-dropdown">
              <a href="/shoes/cart" class="icon-head notification">
                <span><i class="fa-solid fa-cart-shopping"></i></span>
                <span class="badge">{{#if countOrder}} {{countOrder}} {{else}}0{{/if}}</span>
              </a>
              <div class="cart-dropdown-content">
                <p class="boxtitle">GIỎ HÀNG</p>
                <div class="table-scroll">
                  {{!-- Giỏ hàng chưa có sản phẩm --}}
                  <table class="table cart-item-inf-no-shoe">
                    <tbody>
                      <tr>
                        <td style="text-align: center;">
                          <img src="/img/cart-empty.png" alt="">
                          <span>Hiện chưa có sản phẩm</span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  {{!-- Giỏ hàng có sản phẩm --}}
                  {{!-- <table class="table cart-item-inf">
                    <tbody>
                      <tr>
                        <td><img src="/img/NUCG- G018.jpg" alt="Giày Búp Bê"></td>
                        <td colspan="3">
                          <p>Giày Búp Bê Nữ Biti's BBW002888</p>
                          <span style="font-size: 12px;">Kích thước: 37</span>
                          <div class="row">
                            <div class="col">
                              <p style="font-size: 12px;">Số lượng: 2</p>
                            </div>
                            <div class="col">
                              <p class="item-price">391,000 đ</p>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr>
                        <td><img src="/img/NUCG- G018.jpg" alt="Giày Búp Bê"></td>
                        <td colspan="3">
                          <p>Giày Búp Bê Nữ Biti's BBW002888</p>
                          <span style="font-size: 12px;">Kích thước: 37</span>
                          <div class="row">
                            <div class="col">
                              <p style="font-size: 12px;">Số lượng: 2</p>
                            </div>
                            <div class="col">
                              <p class="item-price">391,000 đ</p>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr>
                        <td><img src="/img/NUCG- G018.jpg" alt="Giày Búp Bê"></td>
                        <td colspan="3">
                          <p>Giày Búp Bê Nữ Biti's BBW002888</p>
                          <span style="font-size: 12px;">Kích thước: 37</span>
                          <div class="row">
                            <div class="col">
                              <p style="font-size: 12px;">Số lượng: 2</p>
                            </div>
                            <div class="col">
                              <p class="item-price">391,000 đ</p>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table> --}}
                </div>

                <div class="table-price">
                  <table class="table cart-item-total">
                    <tbody>
                      <tr>
                        <td class="total-lable">TỔNG TIỀN: </td>
                        <td class="total-price">3,854,000 đ</td>
                      </tr>
                      <tr>
                        <td colspan="2"><a href="/shoes/cart" class="btn-view-cart">Xem giỏ hàng</a></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

            </li>
          </ul>

        </div>
        {{!-- >>>>>>> frontend --}}
      </div>
    </nav>
  </div>
  <!-- main content -->

</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var searchInput = document.getElementById('search-input');
    var suggestionsBox = document.getElementById('suggestions');

    searchInput.addEventListener('input', function () {
      var query = searchInput.value.trim();

      if (query.length > 0) {
        // Giả sử chúng ta có một danh sách các từ khóa gợi ý (thực tế bạn sẽ lấy dữ liệu từ server)
        var suggestions = [
          { name: 'Giày Nữ', image: '/img/logo.jpg', price: '500,000 VND' },
          { name: 'Giày Cao Gót', image: '/img/logo.jpg', price: '750,000 VND' },
          { name: 'Giày Thể Thao', image: '/img/logo.jpg', price: '900,000 VND' },
          { name: 'Boot Nam', image: '/img/logo.jpg', price: '1,200,000 VND' },
          { name: 'Dép Nữ', image: '/img/logo.jpg', price: '300,000 VND' },
          { name: 'Giày Tây', image: '/img/logo.jpg', price: '850,000 VND' }
        ];

        // Lọc danh sách gợi ý theo từ khóa
        var filteredSuggestions = suggestions.filter(function (suggestion) {
          return suggestion.name.toLowerCase().includes(query.toLowerCase());
        });

        // Hiển thị các gợi ý
        var suggestionsHtml = filteredSuggestions.map(function (suggestion) {
          return '<div class="suggestion-item">' +
            '<img src="' + suggestion.image + '" alt="' + suggestion.name + '">' +
            '<div class="suggestion-info">' +
            '<a href="/search?query=' + suggestion.name + '">' + suggestion.name + '</a>' +
            '<p>' + suggestion.price + '</p>' +
            '</div>' +
            '</div>';
        }).join('');

        suggestionsBox.innerHTML = suggestionsHtml;
        suggestionsBox.style.display = 'block';
      } else {
        suggestionsBox.style.display = 'none';
      }
    });

    // Đóng danh sách gợi ý khi người dùng click ra ngoài
    document.addEventListener('click', function (event) {
      if (!searchInput.contains(event.target) && !suggestionsBox.contains(event.target)) {
        suggestionsBox.style.display = 'none';
      }
    });
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const cartDropdown = document.querySelector('.cart-dropdown');

    cartDropdown.addEventListener('mouseover', function () {
      // Giả sử bạn có API /api/cart để lấy sản phẩm trong giỏ
      fetch('/api/cart')
        .then(response => response.json())
        .then(data => {
          const cartItems = document.querySelector('.cart-items');
          cartItems.innerHTML = ''; // Xóa nội dung cũ

          // Duyệt qua các sản phẩm và hiển thị
          data.items.forEach(item => {
            const product = document.createElement('p');
            product.textContent = `${item.name} - ${item.quantity} x ${item.price}`;
            cartItems.appendChild(product);
          });
        });
    });
  });
</script>